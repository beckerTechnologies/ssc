<div class="setup_page_3">

<div class="center_text">
<h3>2. Click three boxes to create your secret "Box Code"!</h3>
</div>

  <%= form_tag :url => "./page3" do |p| %>
    <%= hidden_field_tag :ct_mask %>
    <div class="boxes_positions">
      <p hidden='true' id='sscbutton' ></p>
      <!-- <span class="box_positions_text"> Box Numbers: </span>
      | <% @len.times do |x|%>
        <% if x < 9 %>
          <span class="box_positions_1"> <%= x+1 %> </span> |
        <% else %>
          <span class="box_positions_2"> <%= x+1 %> </span> |
        <% end %>
      <% end %> -->
    </div>
    <label id='ct_mask_label'></label><label id='ct_mask_label_values'></label>
    <div class="submit_btn">
      <input type='button' value='Proceed' onclick='checkSubmit()' />
    </div>
  <% end %>
</div>

<script>
  window.onload = function(){
    var ssc = ("<%= @ssc_o%>").split('');
    var p2 = document.getElementById("sscbutton");
    var d = document.createElement("div");
    $(d).attr('id','format');
    for (var i = 0; i < (<%= @len%>).valueOf(); i++ ){
      var ce = document.createElement('input');
      $(ce).attr({
        type:'checkbox',
        id:''+i+''
      });
      $(ce).addClass("step3");
      d.appendChild(ce);
      var ce = document.createElement('label');
      $(ce).attr({
        for:''+i+''        
      });
      $(ce).text(''+ssc[i]+'');
      $(ce).css('border-style','solid');
      $(ce).css('border-width','2px');
      $(ce).css('border-color','black');
      $(ce).addClass("step3");
      d.appendChild(ce);
    }
    $(d).buttonset();
    $(p2).append(d);
    $(p2).show();


    $("#format").click(function(){
      var values = $("#format :checked").map(function(){return (parseInt($(this).attr('id'))+1);}).get();
      $("#ct_mask_label").text("Your secret Box Code is:");
      $("#ct_mask_label_values").text(values);
      
    })

  }
  function checkSubmit(){
    if($("#format :checked").length==3){
      var values = $("#format :checked").map(function(){return (parseInt($(this).attr('id'))+1);}).get();
      $('#ct_mask').val(values);
      $("form").submit();
      return true;
    }
    else{
      alert('You must select 3 boxes');
      return false;
    }
  }

</script>



