<div class="setup_page">

  <p> Your Box Code is: <%= @ssc_bank.ct_mask %> </p>

  <p>your challenge text is <%= @ct%>.</p>

  <h4> Write this down and do not forget it! </h4>

    <h3>Try it Out</h3>


  <div class="ssc-gen">
<h4> Secret Securoty Code Generator </h4>
<small> (Use this generator to create your SSC to enter into the box below.) </small>

  <form id='gen_form' >
    <p>
    <label>Insert your personal ID number</label>
    <span class="input-wide">
    <input type='text' id='numbers'>
    </span>
    </p>
    <p>
    <label>Insert your box positions</label>
    <input maxlength ='2' size='2' id='first'>
    <input maxlength ='2' size='2' id='second'>
    <input maxlength ='2' size='2' id='third'>
    </p>
    <p>
    <label>Insert your challenge key</label>
    <input id='ct_in'>
    </p>
    <div class="submit_btn">
    <input type='button' id='gen_submit' value='Generate SSC'>
    </div>
    <p>
    <label class= "gen_output" hidden='true' for='ssc_out' >Your encoded SSC is: </input>
        <span class="input-wide">

    <input class = "gen_output" hidden='true' type='text' id='ssc_out'></input></span>
    </p>
  </form>
</div>

<script type="text/javascript" charset="utf-8">
  $(function() {
      $("#gen_submit").click(function() {
        var numbers = $('#numbers').val();
        var ct = $('#ct_in').val();
        var numbers_a = numbers.split('');
        numbers_a[parseInt($('#first').val())-1] = ct;
        numbers_a[parseInt($('#second').val())-1] = ct;
        numbers_a[parseInt($('#third').val())-1] = ct;

        var numbers_i = numbers_a.join('');

        $('#ssc_out').val(numbers_i);
        $('.gen_output').show();
        return false;
        })
      })
</script>

  

  <%= form_tag :url => "./page4" do |p| %>
    <p> Enter your SSC: <%= text_field_tag :ssc %> </p>
    </br>
    <div class="submit_btn">
      <%= submit_tag('check') %>
    </div>
  <% end %>



</div>
